<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Data</title>
    <style>
        /* Style the text area to make it wider and rectangular */
        #dataInput {
            width: 100%;              /* Makes it span the full width of its container */
            height: 300px;            /* Gives it a good height for multiline input */
            padding: 10px;            /* Adds space inside the text box */
            border: 1px solid #ccc;   /* Border color */
            border-radius: 5px;       /* Optional: Rounded corners */
            font-family: monospace;    /* Use a monospaced font for JSON formatting */
            font-size: 14px;           /* Optional: Adjust font size */
            resize: both;             /* Allows the user to resize the text area */
        }
    </style>
</head>
<body>
    <h1>Test Data Input</h1>
    
    <form id="testForm" action="http://localhost:8080/ping" method="POST">
        <label for="dataInput">Enter JSON Data:</label><br>
        <textarea id="dataInput" name="data" required placeholder="Enter your JSON here..."></textarea><br><br>
        <button type="submit">Send Data</button>
    </form>
    <div>Here is a sample payload</div>
    <div>{
    "plain": {
        "zip": 92651,
        "gender": "Female",
        "marital_status":"Single"
    },
    "hash": {
        "first_name": "Alice",
        "last_name": "Smith",
        "phone": 1234567890,
        "email": "alice.smith@email.com"
    },
    "endpoint": "http://localhost:8080/buyer"
}</div>

    <script>
        document.getElementById('testForm').addEventListener('submit', function(event) {
            event.preventDefault();  // Prevent the default form submission

            // Get the JSON data from the textarea
            var jsonData = document.getElementById('dataInput').value;

            // Check if the data is valid JSON
            try {
                JSON.parse(jsonData);  // This will throw an error if the JSON is invalid
            } catch (e) {
                alert("Invalid JSON data! Please check your input.");
                return;
            }

            // Send the JSON data to the server
            fetch('http://localhost:8080/ping', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',  // Set Content-Type to JSON
                },
                body: jsonData  // Send the raw JSON from the textarea
            })
            .then(response => response.json())  // Assuming the response is JSON
            .then(data => {
                console.log('Response:', data);  // Log the response from the server
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
